name: Update UCI Points Daily

on:
  schedule:
    # Kører hver dag kl. 06:00 UTC (07:00 dansk tid)
    - cron: '0 6 * * *'
  workflow_dispatch: # Tillader manuel kørsel

jobs:
  update-points:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        pip install cloudscraper beautifulsoup4 pandas gspread oauth2client openpyxl
    
    - name: Create credentials file
      run: |
        echo '${{ secrets.GOOGLE_CREDENTIALS }}' > cycling-fantasy-485220-faab21c57cd1.json
    
    - name: Run update script
      run: |
        python update_automatic_cloudscraper.py
        python scrape_upcoming_races.py
      
    - name: Show results
      if: always()
      run: |
        echo "Update completed!"
